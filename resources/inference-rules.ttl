@base         <http://owl.thi.ng/inference-rules> .
@prefix :     <http://owl.thi.ng/inference#> .
@prefix owl:  <http://www.w3.org/2002/07/owl#> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .
@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

<> a :RuleSet ;
   rdfs:comment """Default thi.ng inference rules""" ;
   :rules (

     [ :name "sub-property" ;
       :match  ( [ :subject "?p" ; :predicate rdfs:subPropertyOf ; :object "?q" ]
                 [ :subject "?x" ; :predicate "?p" ; :object "?y" ] ) ;
       :result ( [ :subject "?x" ; :predicate "?q" ; :object "?y" ] ) ]

     [ :name "symmetric-property" ;
       :match  ( [ :subject "?r" ; :predicate rdf:type ; :object owl:SymmetricProperty ]
                 [ :subject "?a" ; :predicate "?r" ; :object "?b" ] ) ;
       :result ( [ :subject "?b" ; :predicate "?r" ; :object "?a" ] ) ]

     [ :name "inv-property-setup" ;
       :match  ( [ :subject "?r" ; :predicate owl:inverseOf ; :object "?i" ] ) ;
       :result ( [ :subject "?i" ; :predicate owl:inverseOf ; :object "?r" ] ) ]

     [ :name "inverse-property" ;
       :match  ( [ :subject "?r" ; :predicate owl:inverseOf ; :object "?i" ]
                 [ :subject "?a" ; :predicate "?r" ; :object "?b" ] ) ;
       :result ( [ :subject "?b" ; :predicate "?i" ; :object "?a" ] ) ]

     [ :name "range" ;
       :match  ( [ :subject "?p" ; :predicate rdfs:range ; :object "?r" ]
                 [ :subject "?x" ; :predicate "?p" ; :object "?y" ] ) ;
       :result ( [ :subject "?y" ; :predicate rdf:type ; :object "?r" ]
                 [ :subject "?r" ; :predicate rdf:type ; :object owl:Class ] ) ]

     [ :name "domain" ;
       :match  ( [ :subject "?p" ; :predicate rdfs:domain ; :object "?d" ]
                 [ :subject "?x" ; :predicate "?p" ; :object "?y" ] ) ;
       :result ( [ :subject "?x" ; :predicate rdf:type ; :object "?d" ]
                 [ :subject "?d" ; :predicate rdf:type ; :object owl:Class ] ) ]

     [ :name "sub-class" ;
       :match  ( [ :subject "?a" ; :predicate rdfs:subClassOf ; :object "?b" ]
                 [ :subject "?x" ; :predicate rdf:type ; :object "?a" ] ) ;
       :result ( [ :subject "?x" ; :predicate rdf:type ; :object "?b" ]
                 [ :subject "?a" ; :predicate rdf:type ; :object owl:Class ] ) ]

     [ :name "owl-thing" ;
       :match  ( [ :subject "?x" ; :predicate rdf:type ; :object owl:Class ] ) ;
       :result ( [ :subject "?x" ; :predicate rdf:type ; :object owl:Thing ] ) ]

     [ :name "transitive-property" ;
       :match  ( [ :subject "?p" ; :predicate rdf:type ; :object owl:TransitiveProperty ]
                 [ :subject "?x" ; :predicate "?p" ; :object "?y" ]
                 [ :subject "?y" ; :predicate "?p" ; :object "?z" ] ) ;
       :result ( [ :subject "?x" ; :predicate "?p" ; :object "?z" ] ) ]

   ) .
